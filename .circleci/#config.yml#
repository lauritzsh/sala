version: 2

jobs:
  client:
    docker:
      - image: node:10.14-alpine
    steps:
      - add_ssh_keys
      - checkout
      - run: apk update
      - run: apk add --no-cache rsync openssh
      - run: ssh-keyscan $HOST >> ~/.ssh/known_hosts
      - 
  # api:
  #   docker:
  #     - image: bitwalker/alpine-elixir-phoenix:1.6.6
  #   steps:
  #     - add_ssh_keys
  #     - checkout
  #     - run: apk update
  #     - run: apk add --no-cache yarn rsync openssh
  #     - run: ssh-keyscan $HOST >> ~/.ssh/known_hosts
  #     - run:
  #         command: mix do deps.get, compile
  #         working_directory: api
  #     - run:
  #         command: yarn && yarn build
  #         working_directory: client
  #     - run: rsync -va --delete client/build/* $CI_USER@$HOST:$CLIENT_DIR
